#!/usr/bin/env ruby
require "pathname"
require "rake"

include FileUtils

# path to your application root.
APP_ROOT = Pathname.new File.expand_path("../../",  __FILE__)

chdir APP_ROOT do
  # This script is a starting point to setup your application.
  # Add necessary setup steps to this file:

  puts "\n== Building BC - OSC Paraview App =="

  # Add node_modules to PATH
  ENV["PATH"] = "#{ENV["PATH"]}:#{APP_ROOT.join("node_modules", ".bin")}"

  unless system("command -v bower &> /dev/null")
    puts "\n== Installing Bower =="
    sh "npm install bower"
  end

  puts "\n== Installing dependencies =="
  sh "bower install"
  sh "bower prune"

  puts "\n== Does not need to be restarted =="
end
